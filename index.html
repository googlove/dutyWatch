<!DOCTYPE html><html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ù–∞—Ä—è–¥–∏ —Ç–∞ –í–∞—Ö—Ç–∞</title>
  <style>
    body {
      background-color: #0A2A43;
      color: #FFFFFF;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }.header {
  background-color: #1E5D8C;
  padding: 20px;
  font-size: 1.5em;
  border-bottom: 3px solid #144060;
}

.schedule {
  margin: 20px auto;
  width: 90%;
  max-width: 1000px;
  background: #144060;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 20px;
}

th, td {
  border: 1px solid #FFFFFF;
  padding: 10px;
  font-size: 1em;
}

td[contenteditable] {
  cursor: pointer;
}

.controls {
  margin: 10px;
}

button, select {
  margin: 5px;
  padding: 10px 15px;
  background: #1E5D8C;
  border: none;
  border-radius: 10px;
  color: #FFF;
  cursor: pointer;
  font-size: 1em;
  transition: background 0.3s ease;
}

button:hover, select:hover {
  background: #2380c4;
}

.wave {
  height: 50px;
  background: repeating-linear-gradient(-45deg, #1E5D8C 0, #1E5D8C 10px, #0A2A43 10px, #0A2A43 20px);
}

@media (max-width: 600px) {
  table, th, td {
    font-size: 0.85em;
  }
}

.notification {
  background-color: #2ecc71;
  color: white;
  padding: 10px 20px;
  margin: 10px auto;
  border-radius: 10px;
  display: none;
  width: fit-content;
  animation: fadeInOut 3s ease;
}

@keyframes fadeInOut {
  0% { opacity: 0; transform: translateY(-10px); }
  10% { opacity: 1; transform: translateY(0); }
  90% { opacity: 1; }
  100% { opacity: 0; transform: translateY(-10px); }
}

  </style>
</head>
<body>
  <div class="header">
    <h1>üìã –ù–∞—Ä—è–¥–∏ —Ç–∞ –í–∞—Ö—Ç–∞</h1>
  </div>  <div class="notification" id="notify">üì¢ –¢–∞–±–ª–∏—Ü—é —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–æ</div>  <div class="schedule">
    <h2 id="date">–†–æ–∑–∫–ª–∞–¥ (19.07.2025)</h2>
    <div class="controls">
      <label for="duty">üë§ –û–±—Ä–∞—Ç–∏ –Ω–∞—Ä—è–¥ –Ω–∞ —Å—Ç–æ–ª–æ–≤—É:</label>
      <select id="duty" onchange="generateSchedule(true)">
        <option value="">-- –í–∏–±–µ—Ä—ñ—Ç—å --</option>
        <option value="–ü–æ–ª–µ–ê–ø–æ–∫">–ü–æ–ª–µ–ê–ø–æ–∫</option>
        <option value="–í–∏—à—Ç–æ—Ä–æ–∫">–í–∏—à—Ç–æ—Ä–æ–∫</option>
        <option value="–°–µ—Ä–µ–¥–∞">–°–µ—Ä–µ–¥–∞</option>
        <option value="–ß–µ—Ç–≤–µ—Ä">–ß–µ—Ç–≤–µ—Ä</option>
        <option value="–ü‚Äô—è—Ç–Ω–∏—Ü—è">–ü‚Äô—è—Ç–Ω–∏—Ü—è</option>
        <option value="–°—É–±–æ—Ç–∞">–°—É–±–æ—Ç–∞</option>
        <option value="–ù–µ–¥—ñ–ª—è">–ù–µ–¥—ñ–ª—è</option>
      </select>
    </div><table id="schedule">
  <tr>
    <th>üë• –ü—Ä—ñ–∑–≤–∏—â–µ</th>
    <th>üçΩ –ù–∞—Ä—è–¥ –Ω–∞ –°—Ç–æ–ª–æ–≤—É</th>
    <th>üïí –í–∞—Ö—Ç–∞</th>
  </tr>
</table>

<div class="controls">
  <button onclick="addRow()">‚ûï –î–æ–¥–∞—Ç–∏</button>
  <button onclick="removeRow()">üóë –í–∏–¥–∞–ª–∏—Ç–∏</button>
  <button onclick="generateSchedule()">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
  <button onclick="exportToPDF()">üì§ –ó–±–µ—Ä–µ–≥—Ç–∏ PDF</button>
</div>

  </div>  <div class="wave"></div>  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>  <script>
    const people = ["–ü–æ–ª–µ–ê–ø–æ–∫", "–í–∏—à—Ç–æ—Ä–æ–∫", "–°–µ—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä", "–ü‚Äô—è—Ç–Ω–∏—Ü—è", "–°—É–±–æ—Ç–∞", "–ù–µ–¥—ñ–ª—è", "–†–µ–∑–µ—Ä–≤"];
    const baseShifts = {
      –ü–æ–ª–µ–ê–ø–æ–∫: "09:00-12:00",
      –í–∏—à—Ç–æ—Ä–æ–∫: "12:00-15:00",
      –°–µ—Ä–µ–¥–∞: "15:00-18:00",
      –ß–µ—Ç–≤–µ—Ä: "18:00-21:00",
      –ü‚Äô—è—Ç–Ω–∏—Ü—è: "21:00-00:00",
      –°—É–±–æ—Ç–∞: "00:00-03:00",
      –ù–µ–¥—ñ–ª—è: "03:00-06:00",
      –†–µ–∑–µ—Ä–≤: "06:00-09:00"
    };

    let schedule = {};

    function shiftTime(originalShift, index) {
      let [start, end] = originalShift.split("-");
      let startHour = (parseInt(start.split(":"[0])) + (index * 3)) % 24;
      let endHour = (parseInt(end.split(":"[0])) + (index * 3)) % 24;
      return `${startHour.toString().padStart(2, '0')}:00-${endHour.toString().padStart(2, '0')}:00`;
    }

    function showNotification() {
      const notify = document.getElementById("notify");
      notify.style.display = "block";
      setTimeout(() => notify.style.display = "none", 3000);
    }

    function generateSchedule(showNotif = false) {
      let table = document.getElementById("schedule");
      let date = new Date();
      document.getElementById("date").textContent = `–†–æ–∑–∫–ª–∞–¥ (${date.toLocaleDateString()})`;
      let dutyPerson = document.getElementById("duty").value;
      table.innerHTML = "<tr><th>üë• –ü—Ä—ñ–∑–≤–∏—â–µ</th><th>üçΩ –ù–∞—Ä—è–¥ –Ω–∞ –°—Ç–æ–ª–æ–≤—É</th><th>üïí –í–∞—Ö—Ç–∞</th></tr>";
      schedule["schedule"] = [];

      let available = [...people];
      if (dutyPerson) {
        available = available.filter(p => p !== dutyPerson);
        available.unshift(dutyPerson);
      }

      for (let i = 0; i < 7; i++) {
        let person = available[i] || people[i % people.length];
        let row = table.insertRow();
        let cell1 = row.insertCell(); cell1.textContent = person; cell1.contentEditable = true;
        let cell2 = row.insertCell(); cell2.textContent = (person === dutyPerson) ? "09:00-12:00" : "-"; cell2.contentEditable = true;
        let cell3 = row.insertCell(); cell3.textContent = (person === dutyPerson) ? "-" : shiftTime(baseShifts[person], i); cell3.contentEditable = true;
        schedule["schedule"].push({ name: person, duty: cell2.textContent, shift: cell3.textContent });
      }

      localStorage.setItem("schedule", JSON.stringify(schedule));
      if (showNotif) showNotification();
    }

    function addRow() {
      let newPerson = prompt("–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–µ –ø—Ä—ñ–∑–≤–∏—â–µ:");
      if (newPerson && !people.includes(newPerson)) {
        people.push(newPerson);
        baseShifts[newPerson] = `${(6 + (people.length - 1) * 3) % 24}:00-${(9 + (people.length - 1) * 3) % 24}:00`;
        generateSchedule();
      } else {
        alert("–ü—Ä—ñ–∑–≤–∏—â–µ –≤–∂–µ —ñ—Å–Ω—É—î –∞–±–æ –Ω–µ –≤–≤–µ–¥–µ–Ω–æ!");
      }
    }

    function removeRow() {
      let table = document.getElementById("schedule");
      if (table.rows.length > 1) {
        let index = prompt("–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ä—è–¥–∫–∞ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è (1-7):");
        index = parseInt(index) - 1;
        if (index >= 0 && index < table.rows.length - 1) {
          let person = table.rows[index + 1].cells[0].textContent;
          if (people.includes(person)) people.splice(people.indexOf(person), 1);
          delete baseShifts[person];
          table.deleteRow(index + 1);
          schedule["schedule"].splice(index, 1);
          localStorage.setItem("schedule", JSON.stringify(schedule));
        }
      }
    }

    document.getElementById("schedule").addEventListener("input", function(e) {
      let row = e.target.parentElement;
      let index = row.rowIndex - 1;
      schedule["schedule"][index] = {
        name: row.cells[0].textContent,
        duty: row.cells[1].textContent,
        shift: row.cells[2].textContent
      };
      localStorage.setItem("schedule", JSON.stringify(schedule));
    });

    async function exportToPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const table = document.querySelector(".schedule");
      const canvas = await html2canvas(table);
      const imgData = canvas.toDataURL("image/png");
      const date = new Date().toISOString().split("T")[0];
      doc.addImage(imgData, 'PNG', 10, 10, 190, 0);
      doc.save(`schedule-${date}.pdf`);
    }

    generateSchedule();
  </script></body>
</html>
